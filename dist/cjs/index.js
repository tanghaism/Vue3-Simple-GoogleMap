"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("vue");function t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function o(e){for(var o=1;o<arguments.length;o++){var i=null!=arguments[o]?arguments[o]:{};o%2?n(Object(i),!0).forEach((function(n){t(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function i(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function a(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,r=function(){};return{s:r,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,l=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return l=e.done,e},e:function(e){s=!0,a=e},f:function(){try{l||null==n.return||n.return()}finally{if(s)throw a}}}}var l=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var o,i,r;if(Array.isArray(t)){if((o=t.length)!=n.length)return!1;for(i=o;0!=i--;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((o=(r=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=o;0!=i--;)if(!Object.prototype.hasOwnProperty.call(n,r[i]))return!1;for(i=o;0!=i--;){var a=r[i];if(!e(t[a],n[a]))return!1}return!0}return t!=t&&n!=n};class s{constructor({apiKey:e,channel:t,client:n,id:o="__googleMapsScriptId",libraries:i=[],language:r,region:a,version:c,mapIds:d,nonce:u,retries:p=3,url:v="https://maps.googleapis.com/maps/api/js"}){if(this.CALLBACK="__googleMapsCallback",this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.version=c,this.apiKey=e,this.channel=t,this.client=n,this.id=o||"__googleMapsScriptId",this.libraries=i,this.language=r,this.region=a,this.mapIds=d,this.nonce=u,this.retries=p,this.url=v,s.instance){if(!l(this.options,s.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(s.instance.options)}`);return s.instance}s.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url}}createUrl(){let e=this.url;return e+=`?callback=${this.CALLBACK}`,this.apiKey&&(e+=`&key=${this.apiKey}`),this.channel&&(e+=`&channel=${this.channel}`),this.client&&(e+=`&client=${this.client}`),this.libraries.length>0&&(e+=`&libraries=${this.libraries.join(",")}`),this.language&&(e+=`&language=${this.language}`),this.region&&(e+=`&region=${this.region}`),this.version&&(e+=`&v=${this.version}`),this.mapIds&&(e+=`&map_ids=${this.mapIds.join(",")}`),e}load(){return this.loadPromise()}loadPromise(){return new Promise(((e,t)=>{this.loadCallback((n=>{n?t(n):e()}))}))}loadCallback(e){this.callbacks.push(e),this.execute()}setScript(){if(document.getElementById(this.id))return void this.callback();const e=this.createUrl(),t=document.createElement("script");t.id=this.id,t.type="text/javascript",t.src=e,t.onerror=this.loadErrorCallback.bind(this),t.defer=!0,t.async=!0,this.nonce&&(t.nonce=this.nonce),document.head.appendChild(t)}deleteScript(){const e=document.getElementById(this.id);e&&e.remove()}resetIfRetryingFailed(){const e=this.retries+1;this.done&&!this.loading&&this.errors.length>=e&&(this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[])}loadErrorCallback(e){if(this.errors.push(e),this.errors.length<=this.retries){const e=this.errors.length*Math.pow(2,this.errors.length);console.log(`Failed to load Google Maps script, retrying in ${e} ms.`),setTimeout((()=>{this.deleteScript(),this.setScript()}),e)}else this.onerrorEvent=e,this.callback()}setCallback(){window.__googleMapsCallback=this.callback.bind(this)}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach((e=>{e(this.onerrorEvent)})),this.callbacks=[]}execute(){window.google&&window.google.maps&&window.google.maps.version&&(console.warn("Aborted attempt to load Google Maps JS with @googlemaps/js-api-loader.This may result in undesirable behavior as script parameters may not match."),this.callback()),this.resetIfRetryingFailed(),this.done?this.callback():this.loading||(this.loading=!0,this.setCallback(),this.setScript())}}var c,d=["bounds_changed","center_changed","click","dblclick","drag","dragend","dragstart","heading_changed","idle","maptypeid_changed","mousemove","mouseout","mouseover","projection_changed","resize","rightclick","tilesloaded","tilt_changed","zoom_changed"],u=["animation_changed","click","dblclick","rightclick","dragstart","dragend","drag","mouseover","mousedown","mouseup","draggable_changed","clickable_changed","cursor_changed","flat_changed","rightclick","zindex_changed","icon_changed","position_changed","shape_changed","title_changed","visible_changed"],p=["click","dblclick","drag","dragend","dragstart","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"],v=p,h=p.concat(["bounds_changed"]),m=p.concat(["center_changed","radius_changed"]),g=["closeclick","content_changed","domready","position_changed","zindex_changed"],f={name:"google-map",emits:[].concat((c=d,function(e){if(Array.isArray(e))return r(e)}(c)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(c)||i(c)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),["mapReady"]),props:{apiKey:String,version:String,libraries:[String,Array],language:String,newMap:{type:Boolean,default:!1},backgroundColor:String,center:Object,clickableIcons:{type:Boolean,default:void 0},controlSize:Number,disableDefaultUi:{type:Boolean,default:void 0},disableDoubleClickZoom:{type:Boolean,default:void 0},draggable:{type:Boolean,default:void 0},draggableCursor:String,draggingCursor:String,fullscreenControl:{type:Boolean,default:void 0},fullscreenControlPosition:String,gestureHandling:String,heading:Number,keyboardShortcuts:{type:Boolean,default:void 0},mapTypeControl:{type:Boolean,default:void 0},mapTypeControlOptions:Object,mapTypeId:{type:[Number,String]},maxZoom:Number,minZoom:Number,noClear:{type:Boolean,default:void 0},panControl:{type:Boolean,default:void 0},panControlPosition:String,restriction:Object,rotateControl:{type:Boolean,default:void 0},rotateControlPosition:String,scaleControl:{type:Boolean,default:void 0},scaleControlStyle:Number,scrollwheel:{type:Boolean,default:void 0},streetView:Object,streetViewControl:{type:Boolean,default:void 0},streetViewControlPosition:String,styles:Array,tilt:Number,zoom:Number,zoomControl:{type:Boolean,default:void 0},zoomControlPosition:String},setup:function(t,n){var o=n.emit,i=e.ref(null),r=e.ref(!1),l=e.ref(null),c=e.ref(null);e.provide("map",l),e.provide("api",c),e.provide("newMap",t.newMap);var u=function(){var e,n,o,i,r,a={backgroundColor:t.backgroundColor,center:t.center,clickableIcons:t.clickableIcons,controlSize:t.controlSize,disableDefaultUI:t.disableDefaultUi,disableDoubleClickZoom:t.disableDoubleClickZoom,draggable:t.draggable,draggableCursor:t.draggableCursor,draggingCursor:t.draggingCursor,fullscreenControl:t.fullscreenControl,fullscreenControlOptions:t.fullscreenControlPosition?{position:null===(e=c.value)||void 0===e?void 0:e.ControlPosition[t.fullscreenControlPosition]}:{},gestureHandling:t.gestureHandling,heading:t.heading,keyboardShortcuts:t.keyboardShortcuts,mapTypeControl:t.mapTypeControl,mapTypeControlOptions:t.mapTypeControlOptions,mapTypeId:t.mapTypeId,maxZoom:t.maxZoom,minZoom:t.minZoom,noClear:t.noClear,panControl:t.panControl,panControlOptions:t.panControlPosition?{position:null===(n=c.value)||void 0===n?void 0:n.ControlPosition[t.panControlPosition]}:{},restriction:t.restriction,rotateControl:t.rotateControl,rotateControlOptions:t.rotateControlPosition?{position:null===(o=c.value)||void 0===o?void 0:o.ControlPosition[t.rotateControlPosition]}:{},scaleControl:t.scaleControl,scaleControlOptions:t.scaleControlStyle?{style:t.scaleControlStyle}:{},scrollwheel:t.scrollwheel,streetView:t.streetView,streetViewControl:t.streetViewControl,streetViewControlOptions:t.streetViewControlPosition?{position:null===(i=c.value)||void 0===i?void 0:i.ControlPosition[t.streetViewControlPosition]}:{},styles:t.styles,tilt:t.tilt,zoom:t.zoom,zoomControl:t.zoomControl,zoomControlOptions:t.zoomControlPosition?{position:null===(r=window.$mapApi)||void 0===r?void 0:r.ControlPosition[t.zoomControlPosition]}:{}};return Object.keys(a).forEach((function(e){return void 0===a[e]&&delete a[e]})),a};e.onBeforeUnmount((function(){var e,n;l.value&&(t.newMap?null===(e=c.value)||void 0===e||e.event.clearInstanceListeners(l.value):null===(n=window.$mapApi)||void 0===n||n.event.clearInstanceListeners(window.$mapInstance))}));"undefined"!=typeof window&&new s({apiKey:t.apiKey,version:"3.41",libraries:["places"],language:t.language||"en"}).load().then((function(){if(window.$mapInstance&&window.$mapDom&&!t.newMap)document.querySelector("#google-map").appendChild(window.$mapDom),window.$mapInstance.setOptions(u()),l.value=window.$mapInstance,c.value=window.$mapApi,o("mapReady",{map:window.$mapInstance,api:window.$mapApi}),console.log("复用地图实例");else if(t.newMap){var e=(c.value=google.maps).Map;l.value=new e(i.value,u()),console.log("地图初始化成功"),d.forEach((function(e){var t;null===(t=l.value)||void 0===t||t.addListener(e,(function(){return o(e)}))})),r.value=!0,o("mapReady",{map:l.value,api:c.value})}else{var n=(window.$mapApi=google.maps).Map;window.$mapInstance=new n(document.querySelector("#google-map"),u());var a=document.querySelector("#google-map").childNodes[0];a.style.overflow="hidden",window.$mapDom=a,window.$markerArray={},console.log("地图初始化成功"),l.value=window.$mapInstance,c.value=window.$mapApi,d.forEach((function(e){var t;null===(t=window.$mapInstance)||void 0===t||t.addListener(e,(function(){return o(e)}))})),r.value=!0,o("mapReady",{map:window.$mapInstance,api:window.$mapApi})}}));return{mapRef:i,ready:r,map:l,api:c,resetMap:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t.newMap||window.$mapInstance&&(Object.keys(window.$markerArray).forEach((function(e){var t,n=a(window.$markerArray[e]);try{for(n.s();!(t=n.n()).done;){var o=t.value;try{window.$mapApi.event.clearInstanceListeners(o),o.setMap(null)}catch(e){console.warn(e)}}}catch(e){n.e(e)}finally{n.f()}delete window.$markerArray[e]})),e&&Object.keys(window.$mapApi.ControlPosition).forEach((function(e){window.$mapInstance.controls[window.$mapApi.ControlPosition[e]].clear()})))}}}},y=e.withScopeId("data-v-38cd4fdc")((function(t,n,o,i,r,a){return e.openBlock(),e.createBlock("div",e.mergeProps({ref:"mapRef"},t.$attrs,{class:"map",id:o.newMap?"":"google-map"}),[e.createVNode("div",null,[e.renderSlot(t.$slots,"default")])],16,["id"])}));function b(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&o.firstChild?o.insertBefore(i,o.firstChild):o.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}b("\n.map[data-v-38cd4fdc] {\n  position: relative;\n  width: 100%;\n}\n"),f.render=y,f.__scopeId="data-v-38cd4fdc";var _=function(t,n,i,r,a,l,s,c){var d=e.ref(null),u=null,p=function(p){l.value&&s.value&&(d.value=u=new s.value[t](o(o({},e.toRaw(i)),{},{map:l.value})),n.forEach((function(e){var t;null===(t=u)||void 0===t||t.addListener(e,(function(t){return r(e,t,u,a)}))})),c||(window.$markerArray[t]?window.$markerArray[t].push(u):window.$markerArray[t]=[u]))};return e.onMounted((function(){p()})),e.watch([l,s],(function(){p()})),e.onBeforeUnmount((function(){if(u){var e,n,o,i,r,l;if(!c)(null===(o=window)||void 0===o||null===(i=o.$markerArray[t])||void 0===i?void 0:i.length)>0&&(null===(r=window)||void 0===r||null===(l=r.$markerArray[t])||void 0===l||l.splice(a,1));null===(e=s.value)||void 0===e||e.event.clearInstanceListeners(u),null===(n=u)||void 0===n||n.setMap(null)}})),{component:d}},w=e.defineComponent({props:{options:{type:Object,required:!0},index:{type:Number,required:!0}},setup:function(t,n){var o=n.emit,i=e.toRefs(t),r=i.options,a=i.index,l=e.inject("newMap"),s=e.inject("map",e.ref(null)),c=e.inject("api",e.ref(null));return{marker:_("Marker",u,e.toRaw(r.value),o,a,s,c,l)}},render:function(){return null}});
/*!
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *       http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function k(e,t){function n(){}n.prototype=t.prototype,e.superClass_=t.prototype,e.prototype=new n,e.prototype.constructor=e}var C={name:"slot-marker",props:{options:{default:function(){return{}},type:Object},index:{default:0,type:Number}},setup:function(t,n){var o=e.toRefs(t),i=o.options,r=o.index,a=e.ref(null),l=e.inject("newMap"),s=e.inject("map",e.ref(null)),c=e.inject("api",e.ref(null)),d=e.ref(null),p=e.ref(null),v=null;e.provide("$marker",{marker:d});var h=function(e){var t=l?s.value:window.$mapInstance,o=l?c.value:window.$mapApi;if(t&&o){n.slots.labelContent&&1===n.slots.labelContent.length&&n.slots.labelContent[0]&&(i.value=Object.assign({},i.value,{labelContent:p.value}));var a=Object.assign(Object.assign({},i.value),{map:t}),h=p.value;h.parentNode.removeChild(h);var m=function(e){function t(e,n,o){this.marker_=e,this.handCursorURL_=e.handCursorURL,this.labelDiv_=document.createElement("div"),this.labelDiv_.style.cssText="position: absolute; overflow: hidden;",this.eventDiv_=document.createElement("div"),this.eventDiv_.style.cssText=this.labelDiv_.style.cssText,this.eventDiv_.addEventListener("selectstart",(function(){return!1})),this.eventDiv_.addEventListener("dragstart",(function(){return!1})),this.crossDiv_=t.getSharedCross(n)}function n(n){(n=n||{}).labelContent=n.labelContent||"",n.labelAnchor=n.labelAnchor||new e.Point(0,0),n.labelClass=n.labelClass||"markerLabels",n.labelStyle=n.labelStyle||{},n.labelInBackground=n.labelInBackground||!1,void 0===n.labelVisible&&(n.labelVisible=!0),void 0===n.raiseOnDrag&&(n.raiseOnDrag=!0),void 0===n.clickable&&(n.clickable=!0),void 0===n.draggable&&(n.draggable=!1),void 0===n.optimized&&(n.optimized=!1),n.crossImage=n.crossImage||"http"+("https:"===document.location.protocol?"s":"")+"://maps.gstatic.com/intl/en_us/mapfiles/drag_cross_67_16.png",n.handCursor=n.handCursor||"http"+("https:"===document.location.protocol?"s":"")+"://maps.gstatic.com/intl/en_us/mapfiles/closedhand_8_8.cur",n.optimized=!1,this.label=new t(this,n.crossImage,n.handCursor),e.Marker.apply(this,arguments)}return k(t,e.OverlayView),t.getSharedCross=function(e){var n;return void 0===t.getSharedCross.crossDiv&&((n=document.createElement("img")).style.cssText="position: absolute; z-index: 1000002; display: none;",n.style.marginLeft="-8px",n.style.marginTop="-9px",n.src=e,t.getSharedCross.crossDiv=n),t.getSharedCross.crossDiv},t.prototype.onAdd=function(){var n,o,i,r,a,l,s,c=this,d=!1,u=!1,p="url("+this.handCursorURL_+")",v=function(e){e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()},h=function(){c.marker_.setAnimation(null)};this.getPanes().markerLayer.appendChild(this.labelDiv_),this.getPanes().overlayMouseTarget.appendChild(this.eventDiv_),void 0===t.getSharedCross.processed&&(this.getPanes().markerLayer.appendChild(this.crossDiv_),t.getSharedCross.processed=!0),this.listeners_=[e.event.addDomListener(this.eventDiv_,"mouseover",(function(t){(c.marker_.getDraggable()||c.marker_.getClickable())&&(this.style.cursor="pointer",e.event.trigger(c.marker_,"mouseover",t))})),e.event.addDomListener(this.eventDiv_,"mouseout",(function(t){!c.marker_.getDraggable()&&!c.marker_.getClickable()||u||(this.style.cursor=c.marker_.getCursor(),e.event.trigger(c.marker_,"mouseout",t))})),e.event.addDomListener(this.eventDiv_,"mousedown",(function(t){u=!1,c.marker_.getDraggable()&&(d=!0,this.style.cursor=p),(c.marker_.getDraggable()||c.marker_.getClickable())&&(e.event.trigger(c.marker_,"mousedown",t),v(t))})),e.event.addDomListener(document,"mouseup",(function(t){var o;if(d&&(d=!1,c.eventDiv_.style.cursor="pointer",e.event.trigger(c.marker_,"mouseup",t)),u){if(a){(o=c.getProjection().fromLatLngToDivPixel(c.marker_.getPosition())).y+=20,c.marker_.setPosition(c.getProjection().fromDivPixelToLatLng(o));try{c.marker_.setAnimation(e.Animation.BOUNCE),setTimeout(h,1406)}catch(e){}}c.crossDiv_.style.display="none",c.marker_.setZIndex(n),r=!0,u=!1,t.latLng=c.marker_.getPosition(),e.event.trigger(c.marker_,"dragend",t)}})),e.event.addListener(c.marker_.getMap(),"mousemove",(function(t){var r;d&&(u?(t.latLng=new e.LatLng(t.latLng.lat()-o,t.latLng.lng()-i),r=c.getProjection().fromLatLngToDivPixel(t.latLng),a&&(c.crossDiv_.style.left=r.x+"px",c.crossDiv_.style.top=r.y+"px",c.crossDiv_.style.display="",r.y-=20),c.marker_.setPosition(c.getProjection().fromDivPixelToLatLng(r)),a&&(c.eventDiv_.style.top=r.y+20+"px"),e.event.trigger(c.marker_,"drag",t)):(o=t.latLng.lat()-c.marker_.getPosition().lat(),i=t.latLng.lng()-c.marker_.getPosition().lng(),n=c.marker_.getZIndex(),l=c.marker_.getPosition(),s=c.marker_.getMap().getCenter(),a=c.marker_.get("raiseOnDrag"),u=!0,c.marker_.setZIndex(1e6),t.latLng=c.marker_.getPosition(),e.event.trigger(c.marker_,"dragstart",t)))})),e.event.addDomListener(document,"keydown",(function(t){u&&27===t.keyCode&&(a=!1,c.marker_.setPosition(l),c.marker_.getMap().setCenter(s),e.event.trigger(document,"mouseup",t))})),e.event.addDomListener(this.eventDiv_,"click",(function(t){(c.marker_.getDraggable()||c.marker_.getClickable())&&(r?r=!1:(e.event.trigger(c.marker_,"click",t),v(t)))})),e.event.addDomListener(this.eventDiv_,"dblclick",(function(t){(c.marker_.getDraggable()||c.marker_.getClickable())&&(e.event.trigger(c.marker_,"dblclick",t),v(t))})),e.event.addListener(this.marker_,"dragstart",(function(e){u||(a=this.get("raiseOnDrag"))})),e.event.addListener(this.marker_,"drag",(function(e){u||a&&(c.setPosition(20),c.labelDiv_.style.zIndex=1e6+(this.get("labelInBackground")?-1:1))})),e.event.addListener(this.marker_,"dragend",(function(e){u||a&&c.setPosition(0)})),e.event.addListener(this.marker_,"position_changed",(function(){c.setPosition()})),e.event.addListener(this.marker_,"zindex_changed",(function(){c.setZIndex()})),e.event.addListener(this.marker_,"visible_changed",(function(){c.setVisible()})),e.event.addListener(this.marker_,"labelvisible_changed",(function(){c.setVisible()})),e.event.addListener(this.marker_,"title_changed",(function(){c.setTitle()})),e.event.addListener(this.marker_,"labelcontent_changed",(function(){c.setContent()})),e.event.addListener(this.marker_,"labelanchor_changed",(function(){c.setAnchor()})),e.event.addListener(this.marker_,"labelclass_changed",(function(){c.setStyles()})),e.event.addListener(this.marker_,"labelstyle_changed",(function(){c.setStyles()}))]},t.prototype.onRemove=function(){var t;if(this.labelDiv_.parentNode&&(this.labelDiv_.parentNode.removeChild(this.labelDiv_),this.eventDiv_.parentNode.removeChild(this.eventDiv_)),this.listeners_)for(t=0;t<this.listeners_.length;t++)e.event.removeListener(this.listeners_[t])},t.prototype.draw=function(){this.setContent(),this.setTitle(),this.setStyles()},t.prototype.setContent=function(){var e=this.marker_.get("labelContent");if(void 0===e.nodeType)this.labelDiv_.innerHTML=e,this.eventDiv_.innerHTML=this.labelDiv_.innerHTML;else{for(;this.labelDiv_.lastChild;)this.labelDiv_.removeChild(this.labelDiv_.lastChild);for(;this.eventDiv_.lastChild;)this.eventDiv_.removeChild(this.eventDiv_.lastChild);this.labelDiv_.appendChild(e),e=e.cloneNode(!0),this.eventDiv_.appendChild(e)}},t.prototype.setTitle=function(){this.eventDiv_.title=this.marker_.getTitle()||""},t.prototype.setStyles=function(){var e,t;for(e in this.labelDiv_.className=this.marker_.get("labelClass"),this.eventDiv_.className=this.labelDiv_.className,this.labelDiv_.style.cssText="",this.eventDiv_.style.cssText="",t=this.marker_.get("labelStyle"))t.hasOwnProperty(e)&&(this.labelDiv_.style[e]=t[e],this.eventDiv_.style[e]=t[e]);this.setMandatoryStyles()},t.prototype.setMandatoryStyles=function(){this.labelDiv_.style.position="absolute",this.labelDiv_.style.overflow="hidden",void 0!==this.labelDiv_.style.opacity&&""!==this.labelDiv_.style.opacity&&(this.labelDiv_.style.MsFilter='"progid:DXImageTransform.Microsoft.Alpha(opacity='+100*this.labelDiv_.style.opacity+')"',this.labelDiv_.style.filter="alpha(opacity="+100*this.labelDiv_.style.opacity+")"),this.eventDiv_.style.position=this.labelDiv_.style.position,this.eventDiv_.style.overflow=this.labelDiv_.style.overflow,this.eventDiv_.style.opacity=.01,this.eventDiv_.style.MsFilter='"progid:DXImageTransform.Microsoft.Alpha(opacity=1)"',this.eventDiv_.style.filter="alpha(opacity=1)",this.setAnchor(),this.setPosition(),this.setVisible()},t.prototype.setAnchor=function(){var e=this.marker_.get("labelAnchor");this.labelDiv_.style.marginLeft=-e.x+"px",this.labelDiv_.style.marginTop=-e.y+"px",this.eventDiv_.style.marginLeft=-e.x+"px",this.eventDiv_.style.marginTop=-e.y+"px"},t.prototype.setPosition=function(e){var t=this.getProjection().fromLatLngToDivPixel(this.marker_.getPosition());void 0===e&&(e=0),this.labelDiv_.style.left=Math.round(t.x)+"px",this.labelDiv_.style.top=Math.round(t.y-e)+"px",this.eventDiv_.style.left=this.labelDiv_.style.left,this.eventDiv_.style.top=this.labelDiv_.style.top,this.setZIndex()},t.prototype.setZIndex=function(){var e=this.marker_.get("labelInBackground")?-1:1;void 0===this.marker_.getZIndex()?(this.labelDiv_.style.zIndex=parseInt(this.labelDiv_.style.top,10)+e,this.eventDiv_.style.zIndex=this.labelDiv_.style.zIndex):(this.labelDiv_.style.zIndex=this.marker_.getZIndex()+e,this.eventDiv_.style.zIndex=this.labelDiv_.style.zIndex)},t.prototype.setVisible=function(){this.marker_.get("labelVisible")?this.labelDiv_.style.display=this.marker_.getVisible()?"block":"none":this.labelDiv_.style.display="none",this.eventDiv_.style.display=this.labelDiv_.style.display},k(n,e.Marker),n.prototype.setMap=function(t){e.Marker.prototype.setMap.apply(this,arguments),this.label.setMap(t)},n}(o);d.value=v=new m(a),u.forEach((function(e){v&&v.addListener(e,(function(t){return n.emit(e,t,d.value,r.value)}))})),l||(window.$markerArray.MarkerWithLabel?window.$markerArray.MarkerWithLabel.push(v):window.$markerArray.MarkerWithLabel=[v])}},m=function(){if(v){var e,t,n,o,i,a,s;if(!l)(null===(n=window)||void 0===n||null===(o=n.$markerArray)||void 0===o||null===(i=o.MarkerWithLabel)||void 0===i?void 0:i.length)>0&&(null===(a=window)||void 0===a||null===(s=a.$markerArray)||void 0===s||s.MarkerWithLabel.splice(r,1));null===(e=c.value)||void 0===e||e.event.clearInstanceListeners(v),null===(t=v)||void 0===t||t.setMap(null)}};return e.onMounted((function(){h()})),e.onBeforeUnmount((function(){m()})),{marker:d,markerRef:p,markerWithLabel:a,createMarker:h,removeMarker:m}}},D=e.withScopeId("data-v-4c9a0bb0");e.pushScopeId("data-v-4c9a0bb0");var x={ref:"markerRef"};e.popScopeId();var I=D((function(t,n,o,i,r,a){return e.openBlock(),e.createBlock("div",null,[e.createVNode("div",x,[e.renderSlot(t.$slots,"labelContent")],512),e.renderSlot(t.$slots,"default")])}));b("\n\n"),C.render=I,C.__scopeId="data-v-4c9a0bb0";var S={name:"InfoWindow",props:{options:{default:function(){return{}},type:Object},show:{default:!1,type:Boolean},index:{default:0,type:Number}},setup:function(t,n){var o=e.toRefs(t),i=o.options,r=o.show,a=o.index,l=e.inject("$marker"),s=e.inject("newMap"),c=e.inject("map",e.ref(null)),d=e.inject("api",e.ref(null)),u=e.ref(null),p=e.ref(null),v=null,h=e.ref(null);e.onMounted((function(){m()})),e.onUnmounted((function(){y(),p.value&&(d.value&&d.value.event.clearInstanceListeners(v),p.value.setMap(null))})),e.watch((function(){return l.marker}),(function(e,t,n){m(),n((function(){y()}))})),e.watch((function(){return r.value}),(function(e,t){e?f():y()}));var m=function(t){var o=s?c.value:window.$mapInstance,m=s?d.value:window.$mapApi;if(o&&m&&l.marker){y(),u.value=e.toRaw(l.marker);var b=Object.assign(Object.assign({},i.value,{content:h.value,map:c.value}));p.value=v=new m.InfoWindow(b),g.forEach((function(e){v&&v.addListener(e,(function(t){return n.emit(e,t,p.value,a.value)}))})),r.value&&f()}},f=function(){var t;null!=p&&null!==(t=p.value)&&void 0!==t&&t.open&&p.value.open(c.value,e.toRaw(l.marker.value))},y=function(){p.value&&p.value.close(),n.emit("close")};return{infoWindow:p,infoWindowRef:h,openInfoWindow:f,closeInfoWindow:y}}},j=e.withScopeId("data-v-29fbdda4");e.pushScopeId("data-v-29fbdda4");var L={ref:"infoWindowRef"};e.popScopeId();var P=j((function(t,n,o,i,r,a){return e.openBlock(),e.createBlock("div",null,[e.createVNode("div",L,[e.renderSlot(t.$slots,"default")],512)])}));b("\n\n"),S.render=P,S.__scopeId="data-v-29fbdda4";var O=e.defineComponent({props:{options:{type:Object,required:!0},index:{type:Number,required:!0}},setup:function(t,n){var o=n.emit,i=e.toRefs(t),r=i.options,a=i.index,l=e.inject("newMap"),s=e.inject("map",e.ref(null)),c=e.inject("api",e.ref(null)),d=e.toRaw(r.value);return{polyline:_("Polyline",p,d,o,a,s,c,l)}},render:function(){return null}}),M=e.defineComponent({props:{options:{type:Object,required:!0},index:{type:Number,required:!0}},setup:function(t,n){var o=n.emit,i=e.toRefs(t),r=i.options,a=i.index,l=e.inject("newMap"),s=e.inject("map",e.ref(null)),c=e.inject("api",e.ref(null));return{polygon:_("Polygon",v,e.toRaw(r.value),o,a,s,c,l)}},render:function(){return null}}),$=e.defineComponent({props:{options:{type:Object,required:!0},index:{type:Number,required:!0}},setup:function(t,n){var o=n.emit,i=e.toRefs(t),r=i.options,a=i.index,l=e.inject("newMap"),s=e.inject("map",e.ref(null)),c=e.inject("api",e.ref(null));return{rectangle:_("Rectangle",h,e.toRaw(r.value),o,a,s,c,l)}},render:function(){return null}}),A=e.defineComponent({props:{options:{type:Object,required:!0},index:{type:Number,required:!0}},setup:function(t,n){var o=n.emit,i=e.toRefs(t),r=i.options,a=i.index,l=e.inject("newMap"),s=e.inject("map",e.ref(null)),c=e.inject("api",e.ref(null));return{circle:_("Circle",m,e.toRaw(r.value),o,a,s,c,l)}},render:function(){return null}}),T=e.defineComponent({props:{position:{type:String,required:!0},index:{type:Number,required:!0,default:0}},setup:function(t){var n=e.inject("map",e.ref(null)),o=e.inject("api",e.ref(null)),i=e.ref(null),r=function(e){n.value&&o.value&&(t.index&&(i.value.index=t.index),i.value&&n.value.controls[o.value.ControlPosition[t.position]].push(i.value))};return e.onMounted((function(){r()})),e.onBeforeUnmount((function(){!function(e){if(n.value&&o.value&&i.value){var r=0;n.value.controls[o.value.ControlPosition[t.position]]&&n.value.controls[o.value.ControlPosition[t.position]].forEach((function(e,t){e===i.value&&(r=t)})),n.value.controls[o.value.ControlPosition[t.position]].getAt(r)&&n.value.controls[o.value.ControlPosition[t.position]].removeAt(r)}}(t.index)})),e.watch([n,function(){return t.position},function(){return t.index}],(function(e,t,n){r()})),{controlRef:i}}}),B={ref:"controlRef"};T.render=function(t,n,o,i,r,a){return e.openBlock(),e.createBlock("div",B,[e.renderSlot(t.$slots,"default")],512)},exports.Circle=A,exports.CustomControl=T,exports.GoogleMap=f,exports.InfoWindow=S,exports.Marker=w,exports.MarkerWithLabel=C,exports.Polygon=M,exports.Polyline=O,exports.Rectangle=$;

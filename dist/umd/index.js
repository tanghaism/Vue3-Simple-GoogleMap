!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("vue")):"function"==typeof define&&define.amd?define(["exports","vue"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).vue3SingleGooglemap={},e.Vue)}(this,(function(e,t){"use strict";function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?o(Object(i),!0).forEach((function(t){n(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function r(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function l(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=r(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,l=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return l=e.done,e},e:function(e){s=!0,a=e},f:function(){try{l||null==n.return||n.return()}finally{if(s)throw a}}}}var s=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var o,i,r;if(Array.isArray(t)){if((o=t.length)!=n.length)return!1;for(i=o;0!=i--;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((o=(r=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=o;0!=i--;)if(!Object.prototype.hasOwnProperty.call(n,r[i]))return!1;for(i=o;0!=i--;){var a=r[i];if(!e(t[a],n[a]))return!1}return!0}return t!=t&&n!=n};const c="__googleMapsScriptId";class d{constructor({apiKey:e,channel:t,client:n,id:o=c,libraries:i=[],language:r,region:a,version:l,mapIds:u,nonce:p,retries:v=3,url:h="https://maps.googleapis.com/maps/api/js"}){if(this.CALLBACK="__googleMapsCallback",this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.version=l,this.apiKey=e,this.channel=t,this.client=n,this.id=o||c,this.libraries=i,this.language=r,this.region=a,this.mapIds=u,this.nonce=p,this.retries=v,this.url=h,d.instance){if(!s(this.options,d.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(d.instance.options)}`);return d.instance}d.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url}}createUrl(){let e=this.url;return e+=`?callback=${this.CALLBACK}`,this.apiKey&&(e+=`&key=${this.apiKey}`),this.channel&&(e+=`&channel=${this.channel}`),this.client&&(e+=`&client=${this.client}`),this.libraries.length>0&&(e+=`&libraries=${this.libraries.join(",")}`),this.language&&(e+=`&language=${this.language}`),this.region&&(e+=`&region=${this.region}`),this.version&&(e+=`&v=${this.version}`),this.mapIds&&(e+=`&map_ids=${this.mapIds.join(",")}`),e}load(){return this.loadPromise()}loadPromise(){return new Promise(((e,t)=>{this.loadCallback((n=>{n?t(n):e()}))}))}loadCallback(e){this.callbacks.push(e),this.execute()}setScript(){if(document.getElementById(this.id))return void this.callback();const e=this.createUrl(),t=document.createElement("script");t.id=this.id,t.type="text/javascript",t.src=e,t.onerror=this.loadErrorCallback.bind(this),t.defer=!0,t.async=!0,this.nonce&&(t.nonce=this.nonce),document.head.appendChild(t)}deleteScript(){const e=document.getElementById(this.id);e&&e.remove()}resetIfRetryingFailed(){const e=this.retries+1;this.done&&!this.loading&&this.errors.length>=e&&(this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[])}loadErrorCallback(e){if(this.errors.push(e),this.errors.length<=this.retries){const e=this.errors.length*Math.pow(2,this.errors.length);console.log(`Failed to load Google Maps script, retrying in ${e} ms.`),setTimeout((()=>{this.deleteScript(),this.setScript()}),e)}else this.onerrorEvent=e,this.callback()}setCallback(){window.__googleMapsCallback=this.callback.bind(this)}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach((e=>{e(this.onerrorEvent)})),this.callbacks=[]}execute(){window.google&&window.google.maps&&window.google.maps.version&&(console.warn("Aborted attempt to load Google Maps JS with @googlemaps/js-api-loader.This may result in undesirable behavior as script parameters may not match."),this.callback()),this.resetIfRetryingFailed(),this.done?this.callback():this.loading||(this.loading=!0,this.setCallback(),this.setScript())}}var u,p=["bounds_changed","center_changed","click","dblclick","drag","dragend","dragstart","heading_changed","idle","maptypeid_changed","mousemove","mouseout","mouseover","projection_changed","resize","rightclick","tilesloaded","tilt_changed","zoom_changed"],v=["animation_changed","click","dblclick","rightclick","dragstart","dragend","drag","mouseover","mousedown","mouseup","draggable_changed","clickable_changed","cursor_changed","flat_changed","rightclick","zindex_changed","icon_changed","position_changed","shape_changed","title_changed","visible_changed"],h=["click","dblclick","drag","dragend","dragstart","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"],m=h,f=h.concat(["bounds_changed"]),g=h.concat(["center_changed","radius_changed"]),y=["closeclick","content_changed","domready","position_changed","zindex_changed"],b={name:"google-map",emits:[].concat((u=p,function(e){if(Array.isArray(e))return a(e)}(u)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(u)||r(u)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),["mapReady"]),props:{apiKey:String,version:String,libraries:[String,Array],language:String,newMap:{type:Boolean,default:!1},backgroundColor:String,center:Object,clickableIcons:{type:Boolean,default:void 0},controlSize:Number,disableDefaultUi:{type:Boolean,default:void 0},disableDoubleClickZoom:{type:Boolean,default:void 0},draggable:{type:Boolean,default:void 0},draggableCursor:String,draggingCursor:String,fullscreenControl:{type:Boolean,default:void 0},fullscreenControlPosition:String,gestureHandling:String,heading:Number,keyboardShortcuts:{type:Boolean,default:void 0},mapTypeControl:{type:Boolean,default:void 0},mapTypeControlOptions:Object,mapTypeId:{type:[Number,String]},maxZoom:Number,minZoom:Number,noClear:{type:Boolean,default:void 0},panControl:{type:Boolean,default:void 0},panControlPosition:String,restriction:Object,rotateControl:{type:Boolean,default:void 0},rotateControlPosition:String,scaleControl:{type:Boolean,default:void 0},scaleControlStyle:Number,scrollwheel:{type:Boolean,default:void 0},streetView:Object,streetViewControl:{type:Boolean,default:void 0},streetViewControlPosition:String,styles:Array,tilt:Number,zoom:Number,zoomControl:{type:Boolean,default:void 0},zoomControlPosition:String},setup:function(e,n){var o=n.emit,i=t.ref(null),r=t.ref(!1),a=t.ref(null),s=t.ref(null);t.provide("map",a),t.provide("api",s),t.provide("newMap",e.newMap);var c=function(){var t,n,o,i,r,a={backgroundColor:e.backgroundColor,center:e.center,clickableIcons:e.clickableIcons,controlSize:e.controlSize,disableDefaultUI:e.disableDefaultUi,disableDoubleClickZoom:e.disableDoubleClickZoom,draggable:e.draggable,draggableCursor:e.draggableCursor,draggingCursor:e.draggingCursor,fullscreenControl:e.fullscreenControl,fullscreenControlOptions:e.fullscreenControlPosition?{position:null===(t=s.value)||void 0===t?void 0:t.ControlPosition[e.fullscreenControlPosition]}:{},gestureHandling:e.gestureHandling,heading:e.heading,keyboardShortcuts:e.keyboardShortcuts,mapTypeControl:e.mapTypeControl,mapTypeControlOptions:e.mapTypeControlOptions,mapTypeId:e.mapTypeId,maxZoom:e.maxZoom,minZoom:e.minZoom,noClear:e.noClear,panControl:e.panControl,panControlOptions:e.panControlPosition?{position:null===(n=s.value)||void 0===n?void 0:n.ControlPosition[e.panControlPosition]}:{},restriction:e.restriction,rotateControl:e.rotateControl,rotateControlOptions:e.rotateControlPosition?{position:null===(o=s.value)||void 0===o?void 0:o.ControlPosition[e.rotateControlPosition]}:{},scaleControl:e.scaleControl,scaleControlOptions:e.scaleControlStyle?{style:e.scaleControlStyle}:{},scrollwheel:e.scrollwheel,streetView:e.streetView,streetViewControl:e.streetViewControl,streetViewControlOptions:e.streetViewControlPosition?{position:null===(i=s.value)||void 0===i?void 0:i.ControlPosition[e.streetViewControlPosition]}:{},styles:e.styles,tilt:e.tilt,zoom:e.zoom,zoomControl:e.zoomControl,zoomControlOptions:e.zoomControlPosition?{position:null===(r=window.$mapApi)||void 0===r?void 0:r.ControlPosition[e.zoomControlPosition]}:{}};return Object.keys(a).forEach((function(e){return void 0===a[e]&&delete a[e]})),a};t.onBeforeUnmount((function(){var t,n;a.value&&(e.newMap?null===(t=s.value)||void 0===t||t.event.clearInstanceListeners(a.value):null===(n=window.$mapApi)||void 0===n||n.event.clearInstanceListeners(window.$mapInstance))}));"undefined"!=typeof window&&new d({apiKey:e.apiKey,version:"3.41",libraries:["places"],language:e.language||"en"}).load().then((function(){if(window.$mapInstance&&window.$mapDom&&!e.newMap)document.querySelector("#google-map").appendChild(window.$mapDom),window.$mapInstance.setOptions(c()),a.value=window.$mapInstance,s.value=window.$mapApi,o("mapReady",{map:window.$mapInstance,api:window.$mapApi}),console.log("复用地图实例");else if(e.newMap){var t=(s.value=google.maps).Map;a.value=new t(i.value,c()),console.log("地图初始化成功"),p.forEach((function(e){var t;null===(t=a.value)||void 0===t||t.addListener(e,(function(){return o(e)}))})),r.value=!0,o("mapReady",{map:a.value,api:s.value})}else{var n=(window.$mapApi=google.maps).Map;window.$mapInstance=new n(document.querySelector("#google-map"),c());var l=document.querySelector("#google-map").childNodes[0];l.style.overflow="hidden",window.$mapDom=l,window.$markerArray={},console.log("地图初始化成功"),a.value=window.$mapInstance,s.value=window.$mapApi,p.forEach((function(e){var t;null===(t=window.$mapInstance)||void 0===t||t.addListener(e,(function(){return o(e)}))})),r.value=!0,o("mapReady",{map:window.$mapInstance,api:window.$mapApi})}}));return{mapRef:i,ready:r,map:a,api:s,resetMap:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e.newMap||window.$mapInstance&&(Object.keys(window.$markerArray).forEach((function(e){var t,n=l(window.$markerArray[e]);try{for(n.s();!(t=n.n()).done;){var o=t.value;try{window.$mapApi.event.clearInstanceListeners(o),o.setMap(null)}catch(e){console.warn(e)}}}catch(e){n.e(e)}finally{n.f()}delete window.$markerArray[e]})),t&&Object.keys(window.$mapApi.ControlPosition).forEach((function(e){window.$mapInstance.controls[window.$mapApi.ControlPosition[e]].clear()})))}}}},_=t.withScopeId("data-v-38cd4fdc")((function(e,n,o,i,r,a){return t.openBlock(),t.createBlock("div",t.mergeProps({ref:"mapRef"},e.$attrs,{class:"map",id:o.newMap?"":"google-map"}),[t.createVNode("div",null,[t.renderSlot(e.$slots,"default")])],16,["id"])}));function w(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&o.firstChild?o.insertBefore(i,o.firstChild):o.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}w("\n.map[data-v-38cd4fdc] {\n  position: relative;\n  width: 100%;\n}\n"),b.render=_,b.__scopeId="data-v-38cd4fdc";var k=function(e,n,o,r,a,l,s,c){var d=t.ref(null),u=null,p=function(p){l.value&&s.value&&(d.value=u=new s.value[e](i(i({},t.toRaw(o)),{},{map:l.value})),n.forEach((function(e){var t;null===(t=u)||void 0===t||t.addListener(e,(function(t){return r(e,t,u,a)}))})),c||(window.$markerArray[e]?window.$markerArray[e].push(u):window.$markerArray[e]=[u]))};return t.onMounted((function(){p()})),t.watch([l,s],(function(){p()})),t.onBeforeUnmount((function(){if(u){var t,n,o,i,r,l;if(!c)(null===(o=window)||void 0===o||null===(i=o.$markerArray[e])||void 0===i?void 0:i.length)>0&&(null===(r=window)||void 0===r||null===(l=r.$markerArray[e])||void 0===l||l.splice(a,1));null===(t=s.value)||void 0===t||t.event.clearInstanceListeners(u),null===(n=u)||void 0===n||n.setMap(null)}})),{component:d}},C=t.defineComponent({props:{options:{type:Object,required:!0},index:{type:Number,required:!0}},setup:function(e,n){var o=n.emit,i=t.toRefs(e),r=i.options,a=i.index,l=t.inject("newMap"),s=t.inject("map",t.ref(null)),c=t.inject("api",t.ref(null));return{marker:k("Marker",v,t.toRaw(r.value),o,a,s,c,l)}},render:function(){return null}});
/*!
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *       http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */
function D(e,t){function n(){}n.prototype=t.prototype,e.superClass_=t.prototype,e.prototype=new n,e.prototype.constructor=e}var S={name:"slot-marker",props:{options:{default:function(){return{}},type:Object},index:{default:0,type:Number}},setup:function(e,n){var o=t.toRefs(e),i=o.options,r=o.index,a=t.ref(null),l=t.inject("newMap"),s=t.inject("map",t.ref(null)),c=t.inject("api",t.ref(null)),d=t.ref(null),u=t.ref(null),p=null;t.provide("$marker",{marker:d});var h=function(e){var t=l?s.value:window.$mapInstance,o=l?c.value:window.$mapApi;if(t&&o){n.slots.labelContent&&1===n.slots.labelContent.length&&n.slots.labelContent[0]&&(i.value=Object.assign({},i.value,{labelContent:u.value}));var a=Object.assign(Object.assign({},i.value),{map:t}),h=u.value;h.parentNode.removeChild(h);var m=function(e){function t(e,n,o){this.marker_=e,this.handCursorURL_=e.handCursorURL,this.labelDiv_=document.createElement("div"),this.labelDiv_.style.cssText="position: absolute; overflow: hidden;",this.eventDiv_=document.createElement("div"),this.eventDiv_.style.cssText=this.labelDiv_.style.cssText,this.eventDiv_.addEventListener("selectstart",(function(){return!1})),this.eventDiv_.addEventListener("dragstart",(function(){return!1})),this.crossDiv_=t.getSharedCross(n)}function n(n){(n=n||{}).labelContent=n.labelContent||"",n.labelAnchor=n.labelAnchor||new e.Point(0,0),n.labelClass=n.labelClass||"markerLabels",n.labelStyle=n.labelStyle||{},n.labelInBackground=n.labelInBackground||!1,void 0===n.labelVisible&&(n.labelVisible=!0),void 0===n.raiseOnDrag&&(n.raiseOnDrag=!0),void 0===n.clickable&&(n.clickable=!0),void 0===n.draggable&&(n.draggable=!1),void 0===n.optimized&&(n.optimized=!1),n.crossImage=n.crossImage||"http"+("https:"===document.location.protocol?"s":"")+"://maps.gstatic.com/intl/en_us/mapfiles/drag_cross_67_16.png",n.handCursor=n.handCursor||"http"+("https:"===document.location.protocol?"s":"")+"://maps.gstatic.com/intl/en_us/mapfiles/closedhand_8_8.cur",n.optimized=!1,this.label=new t(this,n.crossImage,n.handCursor),e.Marker.apply(this,arguments)}return D(t,e.OverlayView),t.getSharedCross=function(e){var n;return void 0===t.getSharedCross.crossDiv&&((n=document.createElement("img")).style.cssText="position: absolute; z-index: 1000002; display: none;",n.style.marginLeft="-8px",n.style.marginTop="-9px",n.src=e,t.getSharedCross.crossDiv=n),t.getSharedCross.crossDiv},t.prototype.onAdd=function(){var n,o,i,r,a,l,s,c=this,d=!1,u=!1,p="url("+this.handCursorURL_+")",v=function(e){e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()},h=function(){c.marker_.setAnimation(null)};this.getPanes().markerLayer.appendChild(this.labelDiv_),this.getPanes().overlayMouseTarget.appendChild(this.eventDiv_),void 0===t.getSharedCross.processed&&(this.getPanes().markerLayer.appendChild(this.crossDiv_),t.getSharedCross.processed=!0),this.listeners_=[e.event.addDomListener(this.eventDiv_,"mouseover",(function(t){(c.marker_.getDraggable()||c.marker_.getClickable())&&(this.style.cursor="pointer",e.event.trigger(c.marker_,"mouseover",t))})),e.event.addDomListener(this.eventDiv_,"mouseout",(function(t){!c.marker_.getDraggable()&&!c.marker_.getClickable()||u||(this.style.cursor=c.marker_.getCursor(),e.event.trigger(c.marker_,"mouseout",t))})),e.event.addDomListener(this.eventDiv_,"mousedown",(function(t){u=!1,c.marker_.getDraggable()&&(d=!0,this.style.cursor=p),(c.marker_.getDraggable()||c.marker_.getClickable())&&(e.event.trigger(c.marker_,"mousedown",t),v(t))})),e.event.addDomListener(document,"mouseup",(function(t){var o;if(d&&(d=!1,c.eventDiv_.style.cursor="pointer",e.event.trigger(c.marker_,"mouseup",t)),u){if(a){(o=c.getProjection().fromLatLngToDivPixel(c.marker_.getPosition())).y+=20,c.marker_.setPosition(c.getProjection().fromDivPixelToLatLng(o));try{c.marker_.setAnimation(e.Animation.BOUNCE),setTimeout(h,1406)}catch(e){}}c.crossDiv_.style.display="none",c.marker_.setZIndex(n),r=!0,u=!1,t.latLng=c.marker_.getPosition(),e.event.trigger(c.marker_,"dragend",t)}})),e.event.addListener(c.marker_.getMap(),"mousemove",(function(t){var r;d&&(u?(t.latLng=new e.LatLng(t.latLng.lat()-o,t.latLng.lng()-i),r=c.getProjection().fromLatLngToDivPixel(t.latLng),a&&(c.crossDiv_.style.left=r.x+"px",c.crossDiv_.style.top=r.y+"px",c.crossDiv_.style.display="",r.y-=20),c.marker_.setPosition(c.getProjection().fromDivPixelToLatLng(r)),a&&(c.eventDiv_.style.top=r.y+20+"px"),e.event.trigger(c.marker_,"drag",t)):(o=t.latLng.lat()-c.marker_.getPosition().lat(),i=t.latLng.lng()-c.marker_.getPosition().lng(),n=c.marker_.getZIndex(),l=c.marker_.getPosition(),s=c.marker_.getMap().getCenter(),a=c.marker_.get("raiseOnDrag"),u=!0,c.marker_.setZIndex(1e6),t.latLng=c.marker_.getPosition(),e.event.trigger(c.marker_,"dragstart",t)))})),e.event.addDomListener(document,"keydown",(function(t){u&&27===t.keyCode&&(a=!1,c.marker_.setPosition(l),c.marker_.getMap().setCenter(s),e.event.trigger(document,"mouseup",t))})),e.event.addDomListener(this.eventDiv_,"click",(function(t){(c.marker_.getDraggable()||c.marker_.getClickable())&&(r?r=!1:(e.event.trigger(c.marker_,"click",t),v(t)))})),e.event.addDomListener(this.eventDiv_,"dblclick",(function(t){(c.marker_.getDraggable()||c.marker_.getClickable())&&(e.event.trigger(c.marker_,"dblclick",t),v(t))})),e.event.addListener(this.marker_,"dragstart",(function(e){u||(a=this.get("raiseOnDrag"))})),e.event.addListener(this.marker_,"drag",(function(e){u||a&&(c.setPosition(20),c.labelDiv_.style.zIndex=1e6+(this.get("labelInBackground")?-1:1))})),e.event.addListener(this.marker_,"dragend",(function(e){u||a&&c.setPosition(0)})),e.event.addListener(this.marker_,"position_changed",(function(){c.setPosition()})),e.event.addListener(this.marker_,"zindex_changed",(function(){c.setZIndex()})),e.event.addListener(this.marker_,"visible_changed",(function(){c.setVisible()})),e.event.addListener(this.marker_,"labelvisible_changed",(function(){c.setVisible()})),e.event.addListener(this.marker_,"title_changed",(function(){c.setTitle()})),e.event.addListener(this.marker_,"labelcontent_changed",(function(){c.setContent()})),e.event.addListener(this.marker_,"labelanchor_changed",(function(){c.setAnchor()})),e.event.addListener(this.marker_,"labelclass_changed",(function(){c.setStyles()})),e.event.addListener(this.marker_,"labelstyle_changed",(function(){c.setStyles()}))]},t.prototype.onRemove=function(){var t;if(this.labelDiv_.parentNode&&(this.labelDiv_.parentNode.removeChild(this.labelDiv_),this.eventDiv_.parentNode.removeChild(this.eventDiv_)),this.listeners_)for(t=0;t<this.listeners_.length;t++)e.event.removeListener(this.listeners_[t])},t.prototype.draw=function(){this.setContent(),this.setTitle(),this.setStyles()},t.prototype.setContent=function(){var e=this.marker_.get("labelContent");if(void 0===e.nodeType)this.labelDiv_.innerHTML=e,this.eventDiv_.innerHTML=this.labelDiv_.innerHTML;else{for(;this.labelDiv_.lastChild;)this.labelDiv_.removeChild(this.labelDiv_.lastChild);for(;this.eventDiv_.lastChild;)this.eventDiv_.removeChild(this.eventDiv_.lastChild);this.labelDiv_.appendChild(e),e=e.cloneNode(!0),this.eventDiv_.appendChild(e)}},t.prototype.setTitle=function(){this.eventDiv_.title=this.marker_.getTitle()||""},t.prototype.setStyles=function(){var e,t;for(e in this.labelDiv_.className=this.marker_.get("labelClass"),this.eventDiv_.className=this.labelDiv_.className,this.labelDiv_.style.cssText="",this.eventDiv_.style.cssText="",t=this.marker_.get("labelStyle"))t.hasOwnProperty(e)&&(this.labelDiv_.style[e]=t[e],this.eventDiv_.style[e]=t[e]);this.setMandatoryStyles()},t.prototype.setMandatoryStyles=function(){this.labelDiv_.style.position="absolute",this.labelDiv_.style.overflow="hidden",void 0!==this.labelDiv_.style.opacity&&""!==this.labelDiv_.style.opacity&&(this.labelDiv_.style.MsFilter='"progid:DXImageTransform.Microsoft.Alpha(opacity='+100*this.labelDiv_.style.opacity+')"',this.labelDiv_.style.filter="alpha(opacity="+100*this.labelDiv_.style.opacity+")"),this.eventDiv_.style.position=this.labelDiv_.style.position,this.eventDiv_.style.overflow=this.labelDiv_.style.overflow,this.eventDiv_.style.opacity=.01,this.eventDiv_.style.MsFilter='"progid:DXImageTransform.Microsoft.Alpha(opacity=1)"',this.eventDiv_.style.filter="alpha(opacity=1)",this.setAnchor(),this.setPosition(),this.setVisible()},t.prototype.setAnchor=function(){var e=this.marker_.get("labelAnchor");this.labelDiv_.style.marginLeft=-e.x+"px",this.labelDiv_.style.marginTop=-e.y+"px",this.eventDiv_.style.marginLeft=-e.x+"px",this.eventDiv_.style.marginTop=-e.y+"px"},t.prototype.setPosition=function(e){var t=this.getProjection().fromLatLngToDivPixel(this.marker_.getPosition());void 0===e&&(e=0),this.labelDiv_.style.left=Math.round(t.x)+"px",this.labelDiv_.style.top=Math.round(t.y-e)+"px",this.eventDiv_.style.left=this.labelDiv_.style.left,this.eventDiv_.style.top=this.labelDiv_.style.top,this.setZIndex()},t.prototype.setZIndex=function(){var e=this.marker_.get("labelInBackground")?-1:1;void 0===this.marker_.getZIndex()?(this.labelDiv_.style.zIndex=parseInt(this.labelDiv_.style.top,10)+e,this.eventDiv_.style.zIndex=this.labelDiv_.style.zIndex):(this.labelDiv_.style.zIndex=this.marker_.getZIndex()+e,this.eventDiv_.style.zIndex=this.labelDiv_.style.zIndex)},t.prototype.setVisible=function(){this.marker_.get("labelVisible")?this.labelDiv_.style.display=this.marker_.getVisible()?"block":"none":this.labelDiv_.style.display="none",this.eventDiv_.style.display=this.labelDiv_.style.display},D(n,e.Marker),n.prototype.setMap=function(t){e.Marker.prototype.setMap.apply(this,arguments),this.label.setMap(t)},n}(o);d.value=p=new m(a),v.forEach((function(e){p&&p.addListener(e,(function(t){return n.emit(e,t,d.value,r.value)}))})),l||(window.$markerArray.MarkerWithLabel?window.$markerArray.MarkerWithLabel.push(p):window.$markerArray.MarkerWithLabel=[p])}},m=function(){if(p){var e,t,n,o,i,a,s;if(!l)(null===(n=window)||void 0===n||null===(o=n.$markerArray)||void 0===o||null===(i=o.MarkerWithLabel)||void 0===i?void 0:i.length)>0&&(null===(a=window)||void 0===a||null===(s=a.$markerArray)||void 0===s||s.MarkerWithLabel.splice(r,1));null===(e=c.value)||void 0===e||e.event.clearInstanceListeners(p),null===(t=p)||void 0===t||t.setMap(null)}};return t.onMounted((function(){h()})),t.onBeforeUnmount((function(){m()})),{marker:d,markerRef:u,markerWithLabel:a,createMarker:h,removeMarker:m}}},I=t.withScopeId("data-v-4c9a0bb0");t.pushScopeId("data-v-4c9a0bb0");var j={ref:"markerRef"};t.popScopeId();var x=I((function(e,n,o,i,r,a){return t.openBlock(),t.createBlock("div",null,[t.createVNode("div",j,[t.renderSlot(e.$slots,"labelContent")],512),t.renderSlot(e.$slots,"default")])}));w("\n\n"),S.render=x,S.__scopeId="data-v-4c9a0bb0";var L={name:"InfoWindow",props:{options:{default:function(){return{}},type:Object},show:{default:!1,type:Boolean},index:{default:0,type:Number}},setup:function(e,n){var o=t.toRefs(e),i=o.options,r=o.show,a=o.index,l=t.inject("$marker"),s=t.inject("newMap"),c=t.inject("map",t.ref(null)),d=t.inject("api",t.ref(null)),u=t.ref(null),p=t.ref(null),v=null,h=t.ref(null);t.onMounted((function(){m()})),t.onUnmounted((function(){g(),p.value&&(d.value&&d.value.event.clearInstanceListeners(v),p.value.setMap(null))})),t.watch((function(){return l.marker}),(function(e,t,n){m(),n((function(){g()}))})),t.watch((function(){return r.value}),(function(e,t){e?f():g()}));var m=function(e){var o=s?c.value:window.$mapInstance,m=s?d.value:window.$mapApi;if(o&&m&&l.marker){g(),u.value=t.toRaw(l.marker);var b=Object.assign(Object.assign({},i.value,{content:h.value,map:c.value}));p.value=v=new m.InfoWindow(b),y.forEach((function(e){v&&v.addListener(e,(function(t){return n.emit(e,t,p.value,a.value)}))})),r.value&&f()}},f=function(){var e;null!=p&&null!==(e=p.value)&&void 0!==e&&e.open&&p.value.open(c.value,t.toRaw(l.marker.value))},g=function(){p.value&&p.value.close(),n.emit("close")};return{infoWindow:p,infoWindowRef:h,openInfoWindow:f,closeInfoWindow:g}}},P=t.withScopeId("data-v-29fbdda4");t.pushScopeId("data-v-29fbdda4");var O={ref:"infoWindowRef"};t.popScopeId();var M=P((function(e,n,o,i,r,a){return t.openBlock(),t.createBlock("div",null,[t.createVNode("div",O,[t.renderSlot(e.$slots,"default")],512)])}));w("\n\n"),L.render=M,L.__scopeId="data-v-29fbdda4";var $=t.defineComponent({props:{options:{type:Object,required:!0},index:{type:Number,required:!0}},setup:function(e,n){var o=n.emit,i=t.toRefs(e),r=i.options,a=i.index,l=t.inject("newMap"),s=t.inject("map",t.ref(null)),c=t.inject("api",t.ref(null)),d=t.toRaw(r.value);return{polyline:k("Polyline",h,d,o,a,s,c,l)}},render:function(){return null}}),A=t.defineComponent({props:{options:{type:Object,required:!0},index:{type:Number,required:!0}},setup:function(e,n){var o=n.emit,i=t.toRefs(e),r=i.options,a=i.index,l=t.inject("newMap"),s=t.inject("map",t.ref(null)),c=t.inject("api",t.ref(null));return{polygon:k("Polygon",m,t.toRaw(r.value),o,a,s,c,l)}},render:function(){return null}}),T=t.defineComponent({props:{options:{type:Object,required:!0},index:{type:Number,required:!0}},setup:function(e,n){var o=n.emit,i=t.toRefs(e),r=i.options,a=i.index,l=t.inject("newMap"),s=t.inject("map",t.ref(null)),c=t.inject("api",t.ref(null));return{rectangle:k("Rectangle",f,t.toRaw(r.value),o,a,s,c,l)}},render:function(){return null}}),B=t.defineComponent({props:{options:{type:Object,required:!0},index:{type:Number,required:!0}},setup:function(e,n){var o=n.emit,i=t.toRefs(e),r=i.options,a=i.index,l=t.inject("newMap"),s=t.inject("map",t.ref(null)),c=t.inject("api",t.ref(null));return{circle:k("Circle",g,t.toRaw(r.value),o,a,s,c,l)}},render:function(){return null}}),R=t.defineComponent({props:{position:{type:String,required:!0},index:{type:Number,required:!0,default:0}},setup:function(e){var n=t.inject("map",t.ref(null)),o=t.inject("api",t.ref(null)),i=t.ref(null),r=function(t){n.value&&o.value&&(e.index&&(i.value.index=e.index),i.value&&n.value.controls[o.value.ControlPosition[e.position]].push(i.value))};return t.onMounted((function(){r()})),t.onBeforeUnmount((function(){!function(t){if(n.value&&o.value&&i.value){var r=0;n.value.controls[o.value.ControlPosition[e.position]]&&n.value.controls[o.value.ControlPosition[e.position]].forEach((function(e,t){e===i.value&&(r=t)})),n.value.controls[o.value.ControlPosition[e.position]].getAt(r)&&n.value.controls[o.value.ControlPosition[e.position]].removeAt(r)}}(e.index)})),t.watch([n,function(){return e.position},function(){return e.index}],(function(e,t,n){r()})),{controlRef:i}}}),N={ref:"controlRef"};R.render=function(e,n,o,i,r,a){return t.openBlock(),t.createBlock("div",N,[t.renderSlot(e.$slots,"default")],512)},e.Circle=B,e.CustomControl=R,e.GoogleMap=b,e.InfoWindow=L,e.Marker=C,e.MarkerWithLabel=S,e.Polygon=A,e.Polyline=$,e.Rectangle=T,Object.defineProperty(e,"__esModule",{value:!0})}));
